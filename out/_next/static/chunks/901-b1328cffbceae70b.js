(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[901],{2003:function(e,t,n){"use strict";n.d(t,{e:function(){return P}});var i=n(6556);let s=e=>e.reduce((e,t)=>({...e,[t.id]:t}),{}),a=e=>({id:e.id,name:e.name,active:e.active,link:e.link,limit:e.usersLimit}),o=e=>e.map(e=>({id:e.id,text:e.text,image:e.image})),r=e=>({quiz:{id:e.quiz.id,name:e.quiz.name,active:e.quiz.active,link:e.quiz.link,usersLimit:e.quiz.limit},answers:Object.values(e.answers).reduce((e,t)=>[...e,...t],[]),questions:e.questions});var c=n(7211),l=n(9172);let u={DEFAULT_QUIZ:{id:null,name:"",active:!1,link:"",limit:0},DEFAULT_QUESTIONS:[{id:"1",text:""},{id:"2",text:""},{id:"3",text:""}],DEFAULT_ANSWERS:{1:[{id:"1",questionId:"1",text:"",isCorrect:!0},{id:"2",questionId:"1",text:"",isCorrect:!1}],2:[{id:"1",questionId:"2",text:"",isCorrect:!0},{id:"2",questionId:"2",text:"",isCorrect:!1}],3:[{id:"1",questionId:"3",text:"",isCorrect:!0},{id:"2",questionId:"3",text:"",isCorrect:!1}]}},d=(0,l.yM)(),m=(0,l.yM)(),_=(0,l.yM)(),p=(0,l.yM)(),x=(0,l.yM)(),h=(0,l.yM)(),v=(0,l.yM)(),g=(0,l.MT)(u.DEFAULT_QUIZ).on(d,(e,t)=>({...e,...t})).reset(v),f=(0,l.MT)(u.DEFAULT_QUESTIONS).on(m,(e,t)=>e.map(e=>e.id===t.id?{...e,...t}:e)).on(_,e=>[...e,{id:String(e.length+1),index:e.length,text:""}]).on(p,(e,t)=>{let{startIndex:n,endIndex:i}=t,[s]=e.splice(n,1);return e.splice(i,0,s),e}).reset(v),j=(0,l.MT)(u.DEFAULT_ANSWERS).on(x,(e,t)=>{let{questionId:n,id:i,...s}=t;return{...e,[n]:e[n].map(e=>e.id===i?{...e,...s}:e)}}).on(h,(e,t)=>{let{questionId:n}=t;return{...e,[n]:[...e[n],{id:String(e[n].length),questionId:n,text:"",isCorrect:!1}]}}).reset(v);(0,l.UP)({source:{answers:j,questions:f},clock:_,fn:e=>{let{answers:t,questions:n}=e;return{...t,[n.length]:[{id:"1",questionId:String(n.length),text:"",isCorrect:!0},{id:"2",questionId:String(n.length),text:"",isCorrect:!1}]}},target:j}),(0,l.UP)({source:{answers:j},clock:x,filter:(e,t)=>t.isCorrect,fn:(e,t)=>{let{answers:n}=e,{questionId:i,id:s,isCorrect:a}=t;return{...n,[i]:n[i].map(e=>e.id===s?{...e,isCorrect:a}:{...e,isCorrect:!1})}},target:j});let b=(0,l.GW)(c.eU.createQuiz),B=(0,l.yM)();(0,l.UP)({source:{quiz:g,answers:j,questions:f},clock:B,fn:e=>r(e),target:b});let N=(0,l.GW)(c.eU.updateQuiz),z=(0,l.yM)();(0,l.UP)({source:{quiz:g,answers:j,questions:f},clock:z,fn:e=>r(e),target:N});let Q=(0,l.yM)(),y=(0,l.MT)(!1).reset(Q);(0,l.UP)({clock:[b.doneData,N.doneData],fn:()=>!0,target:y});let w=(0,l.GW)(c.eU.deleteQuiz),k=(0,i.Bq)(),I=(0,l.GW)(c.eU.getQuiz),C=(0,i.Bq)();(0,l.UP)({clock:C.open,target:v}),(0,l.UP)({clock:I.doneData,fn:e=>{let{quiz:t}=e;return a(t)},target:d}),(0,l.UP)({clock:I.doneData,fn:e=>{let{questions:t}=e;return o(t)},target:f}),(0,l.UP)({clock:I.doneData,fn:e=>{let{answers:t}=e;return t},target:j}),(0,l.UP)({source:{id:k.state},clock:k.open,fn:e=>{let{id:t}=e;return t},target:I});let q=(0,l.GW)(c.eU.getQuizes),M=(0,i.Bq)(),T=(0,l.MT)({}).on(q.doneData,(e,t)=>{let{data:n}=t;return s(n)});(0,l.UP)({clock:M.open,target:q});let P={useQuizes:()=>((0,i.DD)(M),{pool:(0,i.oR)(T),isLoading:(0,i.oR)(q.pending)}),activeModel:{useQuiz:()=>{let e=(0,i.oR)(g),t=(0,i.eY)(d);return{quiz:e,update:t}},useQuestions:()=>({questions:(0,i.oR)(f),update:(0,i.eY)(m),add:(0,i.eY)(_),reorder:(0,i.eY)(p)}),useAnswers:()=>({answers:(0,i.oR)(j),update:(0,i.eY)(x),add:(0,i.eY)(h)}),useCreate:()=>({create:(0,i.eY)(B),isLoading:(0,i.oR)(b.pending),isCreated:(0,i.oR)(y),reset:(0,i.eY)(Q)}),useUpdate:()=>({update:(0,i.eY)(z),isLoading:(0,i.oR)(N.pending),isCreated:(0,i.oR)(y),reset:(0,i.eY)(Q)}),useGetQuiz:e=>((0,i.DD)(k,e),{isLoading:(0,i.oR)(I.pending)}),useDelete:()=>({deleteQuiz:(0,i.eY)(w)}),useInitQuizCreating:()=>{(0,i.DD)(C)}}}},2999:function(e,t,n){"use strict";n.d(t,{N$:function(){return k},m1:function(){return M},Gg:function(){return Q},C2:function(){return _},H6:function(){return j},tu:function(){return I}});var i=n(7437),s=n(2265),a=n(2003),o=n(8632),r=n(8258),c=n(8770),l=n.n(c);let u=s.memo(e=>{let{className:t}=e;return(0,i.jsx)("div",{className:"".concat(l().root," ").concat(t)})});var d=n(453),m=n.n(d);let _=s.memo(e=>{let{questions:t,answers:n,submitButton:s}=e,{quiz:r,update:c}=a.e.activeModel.useQuiz();return(0,i.jsxs)("div",{className:m().root,children:[(0,i.jsx)(o.I,{label:"Название квиза",placeholder:"Тескт поля",value:r.name,setValue:e=>c({name:e})}),(0,i.jsx)(u,{className:m().divider}),(0,i.jsx)(p,{}),(0,i.jsx)(u,{className:m().divider}),t,(0,i.jsx)(u,{className:m().divider}),n,(0,i.jsx)(u,{className:m().divider}),(0,i.jsx)(o.I,{label:"Создание закрытой ссылки",placeholder:"Создание закрытой ссылки",value:r.link,setValue:e=>c({link:e})}),(0,i.jsx)(u,{className:m().divider}),(0,i.jsx)(o.I,{type:"number",label:"Указание лимита регистраций",placeholder:"Указание лимита регистраций",value:String(r.limit),setValue:e=>c({limit:Number(e)})}),(0,i.jsx)(u,{className:m().divider}),s]})}),p=()=>{let{quiz:e,update:t}=a.e.activeModel.useQuiz();return(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:m()["toggle-label"],children:"Активность"}),(0,i.jsxs)("div",{className:m()["toggle-row"],children:[(0,i.jsx)(r.i,{isActive:e.active,onPress:()=>t({active:!0}),children:"Да"}),(0,i.jsx)(r.i,{isActive:!e.active,onPress:()=>t({active:!1}),children:"Нет"})]})]})};var x=n(5187),h=n(3459),v=n(3834),g=n.n(v),f=n(4741);let j=()=>{let{questions:e,add:t,reorder:n}=a.e.activeModel.useQuestions(),o=(0,s.useCallback)(e=>{e.destination&&n({startIndex:e.source.index,endIndex:e.destination.index})},[]);return(0,i.jsxs)(x.Z5,{onDragEnd:o,children:[(0,i.jsx)(x.bK,{droppableId:"droppable",children:t=>(0,i.jsxs)("div",{...t.droppableProps,ref:t.innerRef,children:[e.map((e,t)=>(0,i.jsx)(b,{question:e,index:t},t)),t.placeholder]})}),(0,i.jsx)(f.z,{className:g().button,view:"secondary",isBold:!0,ariaLabel:"Добавить",onPress:t,children:"Добавить вопрос"})]})},b=s.memo(e=>{let{question:t,index:n}=e,{update:s}=a.e.activeModel.useQuestions();return(0,i.jsx)(x._l,{draggableId:t.id,index:n,children:e=>(0,i.jsx)("div",{className:g().question,ref:e.innerRef,...e.draggableProps,...e.dragHandleProps,children:(0,i.jsxs)("div",{className:g().row,children:[(0,i.jsxs)("span",{className:g().index,children:["№",n]}),(0,i.jsx)(o.I,{className:g().input,value:t.text,placeholder:"Текст вопроса в поле",setValue:e=>s({id:t.id,text:e})}),(0,i.jsx)(h.A,{className:g().icon,name:"menu"})]})})})});var B=n(2611),N=n.n(B),z=n(4470);let Q=()=>{let{answers:e}=a.e.activeModel.useAnswers(),{questions:t}=a.e.activeModel.useQuestions(),[n,o]=(0,s.useState)(t[0].id),r=(0,s.useMemo)(()=>t.findIndex(e=>e.id===n),[t,n]),c=(0,s.useMemo)(()=>t.map((e,t)=>({id:e.id,text:"Вопрос №".concat(t+1)})),[]);return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:N().header,children:[(0,i.jsx)("p",{children:"Создание ответа на вопрос:"}),(0,i.jsx)(z.P,{value:n,options:c,onChange:o})]}),(0,i.jsx)("div",{children:e[n].map((e,t)=>(0,i.jsx)(y,{answer:e,questionIndex:r}))})]})},y=s.memo(e=>{let{answer:t,questionIndex:n}=e,{update:s}=a.e.activeModel.useAnswers();return(0,i.jsxs)("div",{className:N().row,children:[(0,i.jsx)(o.I,{value:t.text,placeholder:"Текст ответа на вопрос №".concat(n),setValue:e=>s({...t,text:e})}),(0,i.jsx)(r.i,{isActive:t.isCorrect,onPress:()=>s({...t,isCorrect:!t.isCorrect}),children:"Верный ответ"})]})});var w=n(4033);let k=()=>{let{create:e,isLoading:t,isCreated:n,reset:o}=a.e.activeModel.useCreate(),{replace:r}=(0,w.useRouter)();return(0,s.useEffect)(()=>{console.log(n),n&&(r("/admin/list"),o())},[n,r]),(0,i.jsx)(f.z,{className:m().button,ariaLabel:"Сохранить",isBold:!0,isDisabled:t,onPress:e,children:"Сохранить"})},I=()=>{let{update:e,isCreated:t,isLoading:n,reset:o}=a.e.activeModel.useUpdate(),{replace:r}=(0,w.useRouter)();return(0,s.useEffect)(()=>{console.log(t),t&&(r("/admin/list"),o())},[t,r]),(0,i.jsx)(f.z,{className:m().button,ariaLabel:"Сохранить",isBold:!0,isDisabled:n,onPress:e,children:"Сохранить"})};var C=n(1023),q=n.n(C);let M=()=>{let{deleteQuiz:e}=a.e.activeModel.useDelete(),{quiz:t}=a.e.activeModel.useQuiz(),{replace:n}=(0,w.useRouter)(),o=(0,s.useCallback)(async()=>{await e(t.id),n("/admin/list")},[]);return(0,i.jsx)(f.z,{className:q().root,ariaLabel:"Удалить",isBold:!0,onPress:o,children:"Удалить"})}},7211:function(e,t,n){"use strict";n.d(t,{mA:function(){return s},qh:function(){return o},eU:function(){return a}});var i=n(7866);let s={getActiveQuiz:async()=>(0,i.$)({url:"/api",method:"GET"}),getAdminMain:async()=>(0,i.$)({url:"/admin/main/api",method:"GET"}),updateMain:async e=>(0,i.$)({url:"/admin/main/api",method:"PUT",body:e})},a={createQuiz:e=>(0,i.$)({url:"/admin/add/api",method:"POST",body:e}),getQuizes:()=>(0,i.$)({url:"/admin/list/api",method:"GET"}),getQuiz:e=>(0,i.$)({url:"/admin/quiz/".concat(e,"/api"),method:"GET"}),updateQuiz:e=>(0,i.$)({url:"/admin/quiz/".concat(e.quiz.id,"/api"),method:"PUT",body:e}),deleteQuiz:e=>(0,i.$)({url:"/admin/quiz/".concat(e,"/api"),method:"DELETE"})},o={getList:async()=>(0,i.$)({url:"/admin/promo/api",method:"GET"}),createPromo:async e=>(0,i.$)({url:"/admin/promo/api",method:"POST",body:e}),updatePromo:async e=>(0,i.$)({url:"/admin/promo/".concat(e.id,"/api"),method:"PUT",body:e}),deletePromo:async e=>(0,i.$)({url:"/admin/promo/".concat(e,"/api"),method:"DELETE"}),getPromo:async e=>(0,i.$)({url:"/admin/promo/".concat(e,"/api"),method:"GET"})}},7866:function(e,t,n){"use strict";n.d(t,{$:function(){return i}});let i=async e=>{let{url:t,method:n="GET",body:i}=e;return fetch(t,{method:n,headers:{"Content-Type":"application/json"},..."GET"!==n&&{body:JSON.stringify(i)}}).then(e=>e.json())}},4741:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});var i=n(7437),s=n(2265),a=n(9047),o=n.n(a);let r=s.memo(e=>{let{children:t,ariaLabel:n,view:a="primary",isBold:r=!1,isDisabled:c=!1,className:l,onPress:u}=e,d=(0,s.useMemo)(()=>[o().button,o()["button--view-".concat(a)],...r?[o().isBold]:[],...c?[o().isDisabled]:[],l].join(" "),[l,a,r,c]);return(0,i.jsx)("button",{"aria-label":n,className:d,disabled:c,onClick:u,children:t})})},3321:function(e,t,n){"use strict";n.d(t,{r:function(){return r}});var i=n(7437),s=n(2265),a=n(6833),o=n.n(a);let r=s.memo(e=>{let{className:t,children:n,title:s}=e;return(0,i.jsxs)("div",{className:"".concat(o().root," ").concat(t),children:[(0,i.jsx)("h1",{className:o().title,children:s}),n]})})},3459:function(e,t,n){"use strict";n.d(t,{A:function(){return r}});var i=n(7437),s=n(2265),a=n(5630),o=n.n(a);let r=s.memo(e=>{let{name:t,className:n}=e,a=(0,s.useMemo)(()=>[o().iconBase,o()["iconBase--".concat(t)],n].join(" "),[t,n]);return(0,i.jsx)("i",{className:a})})},8632:function(e,t,n){"use strict";n.d(t,{I:function(){return r}});var i=n(7437),s=n(2265),a=n(4569),o=n.n(a);let r=s.memo(e=>{let{value:t,setValue:n,placeholder:a,error:r,type:c,label:l,className:u}=e,d=(0,s.useMemo)(()=>[o().input,r&&o().error].join(" "),[]);return(0,i.jsxs)("div",{className:u,children:[l&&(0,i.jsx)("label",{className:o().label,children:l}),(0,i.jsx)("input",{className:d,value:t,onChange:e=>{var t;let{nativeEvent:i}=e;n(null===(t=i.target)||void 0===t?void 0:t.value)},placeholder:a,type:c})]})})},8258:function(e,t,n){"use strict";n.d(t,{i:function(){return r}});var i=n(7437),s=n(2265),a=n(1747),o=n.n(a);let r=s.memo(e=>{let{isActive:t,onPress:n,className:s,children:a}=e;return(0,i.jsxs)("div",{className:o().root,onClick:()=>n(!t),children:[(0,i.jsx)("span",{className:"".concat(o().span," ").concat(t&&o()["is-active"])}),(0,i.jsx)("p",{children:a})]})})},4470:function(e,t,n){"use strict";n.d(t,{P:function(){return r}});var i=n(7437),s=n(2265),a=n(3981),o=n.n(a);let r=s.memo(e=>{let{value:t,options:n,onChange:s,className:a}=e;return(0,i.jsx)("select",{className:"".concat(o().root," ").concat(a),value:t,onChange:e=>s(e.target.value),children:n.map((e,t)=>{let{id:n,text:s}=e;return(0,i.jsx)("option",{value:n,children:s},t)})})})},7085:function(e,t,n){"use strict";n.d(t,{h:function(){return i.Header}});var i=n(8865)},8865:function(e,t,n){"use strict";n.r(t),n.d(t,{Header:function(){return u}});var i=n(7437),s=n(1396),a=n.n(s),o=n(2089),r=n.n(o),c=n(4033);let l=e=>e.includes("admin"),u=()=>{let e=(0,c.usePathname)();return(0,i.jsx)("header",{className:r().header,children:(0,i.jsxs)("div",{className:r().container,children:[(0,i.jsxs)("div",{className:r().main,children:[(0,i.jsx)("span",{className:r().logo,children:"LOGO NAME"}),(0,i.jsx)("p",{className:r().description,children:"Краткое описание чем занимаемся"})]}),l(e)?(0,i.jsxs)("div",{className:"".concat(r().menu," ").concat(r()["admin-menu"]),children:[(0,i.jsx)(a(),{className:r().link,href:"/admin/main",children:"Главная"}),(0,i.jsx)(a(),{className:r().link,href:"/admin/list",children:"Квизы"}),(0,i.jsx)(a(),{className:r().link,href:"/admin/promo",children:"Промокоды"})]}):(0,i.jsxs)("div",{className:r().menu,children:[(0,i.jsx)(a(),{className:r().link,href:"/",children:"Правила"}),(0,i.jsx)(a(),{className:r().link,href:"/",children:"Обратная связь"})]})]})})}},1023:function(e){e.exports={root:"DeleteButton_root__u_CFO"}},2611:function(e){e.exports={header:"QuizAnswers_header__ki6dk",row:"QuizAnswers_row__cLas4"}},453:function(e){e.exports={root:"QuizForm_root__zU_Vr",divider:"QuizForm_divider__BvgJT","toggle-row":"QuizForm_toggle-row__1kI7i","toggle-label":"QuizForm_toggle-label__oV_g3",button:"QuizForm_button__sVtkX"}},3834:function(e){e.exports={question:"QuizQuestions_question__nD6Uj",row:"QuizQuestions_row__gCRow",input:"QuizQuestions_input__4dgT7",index:"QuizQuestions_index__rxl_L",icon:"QuizQuestions_icon___PzBm",button:"QuizQuestions_button__m1t0b"}},9047:function(e){e.exports={button:"Button_button__wliYd","button--view-primary":"Button_button--view-primary__cWRgD","button--view-secondary":"Button_button--view-secondary__m_8WR",isBold:"Button_isBold__taXiK",isDisabled:"Button_isDisabled__Li_lC"}},6833:function(e){e.exports={root:"ContainerLayout_root__zz1Y6",title:"ContainerLayout_title__4hAT8"}},8770:function(e){e.exports={root:"Divider_root__yiRTw"}},5630:function(e){e.exports={iconBase:"IconBase_iconBase__yVV0x","iconBase--people":"IconBase_iconBase--people__MwkHU","iconBase--time":"IconBase_iconBase--time__BQ7Wi","iconBase--currency":"IconBase_iconBase--currency___h1lj","iconBase--date":"IconBase_iconBase--date__NsHk0","iconBase--error":"IconBase_iconBase--error__2eW_2","iconBase--success":"IconBase_iconBase--success__wQV3Z","iconBase--menu":"IconBase_iconBase--menu__s4CGP","iconBase--telegram":"IconBase_iconBase--telegram__nJjjp","iconBase--arrow":"IconBase_iconBase--arrow__tHAQk","iconBase--close":"IconBase_iconBase--close__DIJpT"}},4569:function(e){e.exports={input:"Input_input__dwy5x",label:"Input_label__5xQux","is-error":"Input_is-error___5fOS"}},1747:function(e){e.exports={root:"RadioToggle_root__gLM1H",span:"RadioToggle_span__Akwp1","is-active":"RadioToggle_is-active__affC_"}},3981:function(e){e.exports={root:"Select_root__G23w_"}},2089:function(e){e.exports={header:"Header_header__Dqf0m",container:"Header_container___yW_1",main:"Header_main__t2bl_",logo:"Header_logo__YGu1H",description:"Header_description__qjc_m",menu:"Header_menu__pWdCw",link:"Header_link__XgKme","admin-menu":"Header_admin-menu__UPLc8"}}}]);