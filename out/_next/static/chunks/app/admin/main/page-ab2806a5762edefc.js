(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[377],{3161:function(e,t,n){Promise.resolve().then(n.bind(n,1648))},1648:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D}});var i=n(7437),r=n(7211),a=n(9172),o=n(6556);let s=(0,a.MT)({id:1,title:"",description:"",time:"",date:"",quizId:"",price:""}),u=(0,a.yM)();s.on(u,(e,t)=>({...e,...t}));let d=(0,a.GW)(r.mA.getAdminMain);s.on(d.doneData,(e,t)=>t);let l=(0,o.Bq)();(0,a.UP)({clock:l.open,target:d});let c=(0,a.GW)(r.mA.updateMain),m=(0,a.yM)();(0,a.UP)({source:{data:s},clock:m,fn:e=>{let{data:t}=e;return t},target:c});let p={useGetMain:()=>((0,o.DD)(l),{isLoading:(0,o.oR)(d.pending)}),useUpdateMain:()=>({update:(0,o.eY)(m),isLoading:(0,o.oR)(c.pending)}),useMain:()=>({main:(0,o.oR)(s),update:(0,o.eY)(u)})};var _=n(2003),h=n(2265),g=n(8632),f=n(9584),x=n(5530),v=n.n(x);let y={title:"Введите заголовок",description:"Введите описание",time:"Время начала",date:"Дата проведения",quizId:"Привязанный квиз",price:"Введите цену"},z=h.memo(()=>{let{main:e,update:t}=p.useMain();return(0,i.jsx)("div",{children:Object.keys(e).map(n=>(0,i.jsxs)(i.Fragment,{children:["quizId"!==n&&"id"!==n&&(0,i.jsx)(g.I,{className:v().field,value:String(e[n]),placeholder:y[n],setValue:e=>t({[n]:e})}),"quizId"===n&&(0,i.jsx)(f.Q,{className:v().field,value:e.quizId,onChange:e=>t({quizId:e})})]}))})});var j=n(4741),q=n(7474),U=n.n(q);let M=()=>{let{update:e,isLoading:t}=p.useUpdateMain();return(0,i.jsx)(j.z,{className:U().root,ariaLabel:"Сохранить",isDisabled:t,onPress:e,children:"Сохранить"})};var b=n(9785),N=n(3321),k=n(7085),T=n(4033);function D(){let{replace:e}=(0,T.useRouter)(),{isLoading:t}=p.useGetMain();return _.e.useQuizes(),(0,h.useEffect)(()=>{let t=b.J.getIsAuth();console.log(t),t||e("/admin/login")}),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(k.h,{}),!t&&(0,i.jsxs)(N.r,{title:"Главная",children:[(0,i.jsx)(z,{}),(0,i.jsx)(M,{})]})]})}},9584:function(e,t,n){"use strict";n.d(t,{Q:function(){return s}});var i=n(7437),r=n(2003),a=n(4470),o=n(2265);let s=o.memo(e=>{let{value:t,onChange:n,className:s}=e,{pool:u}=r.e.useQuizes(),d=(0,o.useMemo)(()=>Object.values(u).map(e=>({id:e.id,text:e.name})),[u]);return(0,i.jsx)(a.P,{className:s,value:t,onChange:n,options:[{id:"",text:"Не выбран"},...d]})})},2003:function(e,t,n){"use strict";n.d(t,{e:function(){return C}});var i=n(6556);let r=e=>e.reduce((e,t)=>({...e,[t.id]:t}),{}),a=e=>({id:e.id,name:e.name,active:e.active,link:e.link,limit:e.usersLimit}),o=e=>e.map(e=>({id:e.id,text:e.text,image:e.image})),s=e=>({quiz:{id:e.quiz.id,name:e.quiz.name,active:e.quiz.active,link:e.quiz.link,usersLimit:e.quiz.limit},answers:Object.values(e.answers).reduce((e,t)=>[...e,...t],[]),questions:e.questions});var u=n(7211),d=n(9172);let l={DEFAULT_QUIZ:{id:null,name:"",active:!1,link:"",limit:0},DEFAULT_QUESTIONS:[{id:"1",text:""},{id:"2",text:""},{id:"3",text:""}],DEFAULT_ANSWERS:{1:[{id:"1",questionId:"1",text:"",isCorrect:!0},{id:"2",questionId:"1",text:"",isCorrect:!1}],2:[{id:"1",questionId:"2",text:"",isCorrect:!0},{id:"2",questionId:"2",text:"",isCorrect:!1}],3:[{id:"1",questionId:"3",text:"",isCorrect:!0},{id:"2",questionId:"3",text:"",isCorrect:!1}]}},c=(0,d.yM)(),m=(0,d.yM)(),p=(0,d.yM)(),_=(0,d.yM)(),h=(0,d.yM)(),g=(0,d.yM)(),f=(0,d.yM)(),x=(0,d.MT)(l.DEFAULT_QUIZ).on(c,(e,t)=>({...e,...t})).reset(f),v=(0,d.MT)(l.DEFAULT_QUESTIONS).on(m,(e,t)=>e.map(e=>e.id===t.id?{...e,...t}:e)).on(p,e=>[...e,{id:String(e.length+1),index:e.length,text:""}]).on(_,(e,t)=>{let{startIndex:n,endIndex:i}=t,[r]=e.splice(n,1);return e.splice(i,0,r),e}).reset(f),y=(0,d.MT)(l.DEFAULT_ANSWERS).on(h,(e,t)=>{let{questionId:n,id:i,...r}=t;return{...e,[n]:e[n].map(e=>e.id===i?{...e,...r}:e)}}).on(g,(e,t)=>{let{questionId:n}=t;return{...e,[n]:[...e[n],{id:String(e[n].length),questionId:n,text:"",isCorrect:!1}]}}).reset(f);(0,d.UP)({source:{answers:y,questions:v},clock:p,fn:e=>{let{answers:t,questions:n}=e;return{...t,[n.length]:[{id:"1",questionId:String(n.length),text:"",isCorrect:!0},{id:"2",questionId:String(n.length),text:"",isCorrect:!1}]}},target:y}),(0,d.UP)({source:{answers:y},clock:h,filter:(e,t)=>t.isCorrect,fn:(e,t)=>{let{answers:n}=e,{questionId:i,id:r,isCorrect:a}=t;return{...n,[i]:n[i].map(e=>e.id===r?{...e,isCorrect:a}:{...e,isCorrect:!1})}},target:y});let z=(0,d.GW)(u.eU.createQuiz),j=(0,d.yM)();(0,d.UP)({source:{quiz:x,answers:y,questions:v},clock:j,fn:e=>s(e),target:z});let q=(0,d.GW)(u.eU.updateQuiz),U=(0,d.yM)();(0,d.UP)({source:{quiz:x,answers:y,questions:v},clock:U,fn:e=>s(e),target:q});let M=(0,d.yM)(),b=(0,d.MT)(!1).reset(M);(0,d.UP)({clock:[z.doneData,q.doneData],fn:()=>!0,target:b});let N=(0,d.GW)(u.eU.deleteQuiz),k=(0,i.Bq)(),T=(0,d.GW)(u.eU.getQuiz),D=(0,i.Bq)();(0,d.UP)({clock:D.open,target:f}),(0,d.UP)({clock:T.doneData,fn:e=>{let{quiz:t}=e;return a(t)},target:c}),(0,d.UP)({clock:T.doneData,fn:e=>{let{questions:t}=e;return o(t)},target:v}),(0,d.UP)({clock:T.doneData,fn:e=>{let{answers:t}=e;return t},target:y}),(0,d.UP)({source:{id:k.state},clock:k.open,fn:e=>{let{id:t}=e;return t},target:T});let I=(0,d.GW)(u.eU.getQuizes),E=(0,i.Bq)(),P=(0,d.MT)({}).on(I.doneData,(e,t)=>{let{data:n}=t;return r(n)});(0,d.UP)({clock:E.open,target:I});let C={useQuizes:()=>((0,i.DD)(E),{pool:(0,i.oR)(P),isLoading:(0,i.oR)(I.pending)}),activeModel:{useQuiz:()=>{let e=(0,i.oR)(x),t=(0,i.eY)(c);return{quiz:e,update:t}},useQuestions:()=>({questions:(0,i.oR)(v),update:(0,i.eY)(m),add:(0,i.eY)(p),reorder:(0,i.eY)(_)}),useAnswers:()=>({answers:(0,i.oR)(y),update:(0,i.eY)(h),add:(0,i.eY)(g)}),useCreate:()=>({create:(0,i.eY)(j),isLoading:(0,i.oR)(z.pending),isCreated:(0,i.oR)(b),reset:(0,i.eY)(M)}),useUpdate:()=>({update:(0,i.eY)(U),isLoading:(0,i.oR)(q.pending),isCreated:(0,i.oR)(b),reset:(0,i.eY)(M)}),useGetQuiz:e=>((0,i.DD)(k,e),{isLoading:(0,i.oR)(T.pending)}),useDelete:()=>({deleteQuiz:(0,i.eY)(N)}),useInitQuizCreating:()=>{(0,i.DD)(D)}}}},7211:function(e,t,n){"use strict";n.d(t,{mA:function(){return r},qh:function(){return o},eU:function(){return a}});var i=n(7866);let r={getActiveQuiz:async()=>(0,i.$)({url:"/api",method:"GET"}),getAdminMain:async()=>(0,i.$)({url:"/admin/main/api",method:"GET"}),updateMain:async e=>(0,i.$)({url:"/admin/main/api",method:"PUT",body:e})},a={createQuiz:e=>(0,i.$)({url:"/admin/add/api",method:"POST",body:e}),getQuizes:()=>(0,i.$)({url:"/admin/list/api",method:"GET"}),getQuiz:e=>(0,i.$)({url:"/admin/quiz/".concat(e,"/api"),method:"GET"}),updateQuiz:e=>(0,i.$)({url:"/admin/quiz/".concat(e.quiz.id,"/api"),method:"PUT",body:e}),deleteQuiz:e=>(0,i.$)({url:"/admin/quiz/".concat(e,"/api"),method:"DELETE"})},o={getList:async()=>(0,i.$)({url:"/admin/promo/api",method:"GET"}),createPromo:async e=>(0,i.$)({url:"/admin/promo/api",method:"POST",body:e}),updatePromo:async e=>(0,i.$)({url:"/admin/promo/".concat(e.id,"/api"),method:"PUT",body:e}),deletePromo:async e=>(0,i.$)({url:"/admin/promo/".concat(e,"/api"),method:"DELETE"}),getPromo:async e=>(0,i.$)({url:"/admin/promo/".concat(e,"/api"),method:"GET"})}},7866:function(e,t,n){"use strict";n.d(t,{$:function(){return i}});let i=async e=>{let{url:t,method:n="GET",body:i}=e;return fetch(t,{method:n,headers:{"Content-Type":"application/json"},..."GET"!==n&&{body:JSON.stringify(i)}}).then(e=>e.json())}},9785:function(e,t,n){"use strict";n.d(t,{J:function(){return i}});let i={setIsAuth:e=>{window.localStorage.setItem("isAuth",e)},getIsAuth:()=>window.localStorage.getItem("isAuth")}},4741:function(e,t,n){"use strict";n.d(t,{z:function(){return s}});var i=n(7437),r=n(2265),a=n(9047),o=n.n(a);let s=r.memo(e=>{let{children:t,ariaLabel:n,view:a="primary",isBold:s=!1,isDisabled:u=!1,className:d,onPress:l}=e,c=(0,r.useMemo)(()=>[o().button,o()["button--view-".concat(a)],...s?[o().isBold]:[],...u?[o().isDisabled]:[],d].join(" "),[d,a,s,u]);return(0,i.jsx)("button",{"aria-label":n,className:c,disabled:u,onClick:l,children:t})})},3321:function(e,t,n){"use strict";n.d(t,{r:function(){return s}});var i=n(7437),r=n(2265),a=n(6833),o=n.n(a);let s=r.memo(e=>{let{className:t,children:n,title:r}=e;return(0,i.jsxs)("div",{className:"".concat(o().root," ").concat(t),children:[(0,i.jsx)("h1",{className:o().title,children:r}),n]})})},8632:function(e,t,n){"use strict";n.d(t,{I:function(){return s}});var i=n(7437),r=n(2265),a=n(4569),o=n.n(a);let s=r.memo(e=>{let{value:t,setValue:n,placeholder:a,error:s,type:u,label:d,className:l}=e,c=(0,r.useMemo)(()=>[o().input,s&&o().error].join(" "),[]);return(0,i.jsxs)("div",{className:l,children:[d&&(0,i.jsx)("label",{className:o().label,children:d}),(0,i.jsx)("input",{className:c,value:t,onChange:e=>{var t;let{nativeEvent:i}=e;n(null===(t=i.target)||void 0===t?void 0:t.value)},placeholder:a,type:u})]})})},4470:function(e,t,n){"use strict";n.d(t,{P:function(){return s}});var i=n(7437),r=n(2265),a=n(3981),o=n.n(a);let s=r.memo(e=>{let{value:t,options:n,onChange:r,className:a}=e;return(0,i.jsx)("select",{className:"".concat(o().root," ").concat(a),value:t,onChange:e=>r(e.target.value),children:n.map((e,t)=>{let{id:n,text:r}=e;return(0,i.jsx)("option",{value:n,children:r},t)})})})},7085:function(e,t,n){"use strict";n.d(t,{h:function(){return i.Header}});var i=n(8865)},8865:function(e,t,n){"use strict";n.r(t),n.d(t,{Header:function(){return l}});var i=n(7437),r=n(1396),a=n.n(r),o=n(2089),s=n.n(o),u=n(4033);let d=e=>e.includes("admin"),l=()=>{let e=(0,u.usePathname)();return(0,i.jsx)("header",{className:s().header,children:(0,i.jsxs)("div",{className:s().container,children:[(0,i.jsxs)("div",{className:s().main,children:[(0,i.jsx)("span",{className:s().logo,children:"LOGO NAME"}),(0,i.jsx)("p",{className:s().description,children:"Краткое описание чем занимаемся"})]}),d(e)?(0,i.jsxs)("div",{className:"".concat(s().menu," ").concat(s()["admin-menu"]),children:[(0,i.jsx)(a(),{className:s().link,href:"/admin/main",children:"Главная"}),(0,i.jsx)(a(),{className:s().link,href:"/admin/list",children:"Квизы"}),(0,i.jsx)(a(),{className:s().link,href:"/admin/promo",children:"Промокоды"})]}):(0,i.jsxs)("div",{className:s().menu,children:[(0,i.jsx)(a(),{className:s().link,href:"/",children:"Правила"}),(0,i.jsx)(a(),{className:s().link,href:"/",children:"Обратная связь"})]})]})})}},7474:function(e){e.exports={root:"UpdateMainButton_root__QIXcU"}},5530:function(e){e.exports={field:"UpdateMainForm_field__RhA2x"}},9047:function(e){e.exports={button:"Button_button__wliYd","button--view-primary":"Button_button--view-primary__cWRgD","button--view-secondary":"Button_button--view-secondary__m_8WR",isBold:"Button_isBold__taXiK",isDisabled:"Button_isDisabled__Li_lC"}},6833:function(e){e.exports={root:"ContainerLayout_root__zz1Y6",title:"ContainerLayout_title__4hAT8"}},4569:function(e){e.exports={input:"Input_input__dwy5x",label:"Input_label__5xQux","is-error":"Input_is-error___5fOS"}},3981:function(e){e.exports={root:"Select_root__G23w_"}},2089:function(e){e.exports={header:"Header_header__Dqf0m",container:"Header_container___yW_1",main:"Header_main__t2bl_",logo:"Header_logo__YGu1H",description:"Header_description__qjc_m",menu:"Header_menu__pWdCw",link:"Header_link__XgKme","admin-menu":"Header_admin-menu__UPLc8"}}},function(e){e.O(0,[231,396,971,596,744],function(){return e(e.s=3161)}),_N_E=e.O()}]);