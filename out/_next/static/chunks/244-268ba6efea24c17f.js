(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[244],{5031:function(e,t,n){"use strict";n.d(t,{M:function(){return x}});var i=n(6556),r=n(9172),o=n(7211),a=n(2265);let s=(0,r.MT)({quizId:"",name:"",limit:0}),u=(0,r.yM)();s.on(u,(e,t)=>({...e,...t}));let l=(0,r.GW)(o.qh.createPromo),c=(0,r.GW)(o.qh.updatePromo),d=(0,r.GW)(o.qh.deletePromo),m=(0,r.GW)(o.qh.getPromo);s.on(m.doneData,(e,t)=>{let{promo:n}=t;return n});let p=(0,i.Bq)();(0,r.UP)({clock:p.open,target:m});let _=(0,i.Bq)();s.reset(_.open);let h=(0,r.MT)([]),g=(0,r.GW)(o.qh.getList);h.on(g.doneData,(e,t)=>{let{data:n}=t;return n});let f=(0,i.Bq)();(0,r.UP)({clock:f.open,target:g});let x={useGetPromoList:()=>((0,i.DD)(f),{isLoading:(0,i.oR)(g.pending),list:(0,i.oR)(h)}),activeModel:{usePromo:()=>({promo:(0,i.oR)(s),fillPromo:(0,i.eY)(u)}),useCreatePromo:()=>{let e=(0,i.oR)(s),t=(0,i.eY)(l),n=(0,a.useCallback)(async()=>{console.log(e),await t(e)},[e,t]);return{onCreate:n,isLoading:(0,i.oR)(l.pending)}},useUpdatePromo:()=>{let e=(0,i.oR)(s),t=(0,i.eY)(c),n=(0,a.useCallback)(async()=>{await t(e)},[e,t]);return{onUpdate:n,isLoading:(0,i.oR)(c.pending)}},useDeletePromo:()=>{let e=(0,i.eY)(d),t=(0,i.oR)(s),n=(0,a.useCallback)(async()=>{await e(t.id)},[t,e]);return{onDelete:n,isLoading:(0,i.oR)(d.pending)}},useGetPromo:e=>((0,i.DD)(p,e),{isLoading:(0,i.oR)(m.pending)}),useInitCreatePromo:()=>{(0,i.DD)(_)}}}},9584:function(e,t,n){"use strict";n.d(t,{Q:function(){return s}});var i=n(7437),r=n(2003),o=n(4470),a=n(2265);let s=a.memo(e=>{let{value:t,onChange:n,className:s}=e,{pool:u}=r.e.useQuizes(),l=(0,a.useMemo)(()=>Object.values(u).map(e=>({id:e.id,text:e.name})),[u]);return(0,i.jsx)(o.P,{className:s,value:t,onChange:n,options:[{id:"",text:"Не выбран"},...l]})})},2003:function(e,t,n){"use strict";n.d(t,{e:function(){return E}});var i=n(6556);let r=e=>e.reduce((e,t)=>({...e,[t.id]:t}),{}),o=e=>({id:e.id,name:e.name,active:e.active,link:e.link,limit:e.usersLimit}),a=e=>e.map(e=>({id:e.id,text:e.text,image:e.image})),s=e=>({quiz:{id:e.quiz.id,name:e.quiz.name,active:e.quiz.active,link:e.quiz.link,usersLimit:e.quiz.limit},answers:Object.values(e.answers).reduce((e,t)=>[...e,...t],[]),questions:e.questions});var u=n(7211),l=n(9172);let c={DEFAULT_QUIZ:{id:null,name:"",active:!1,link:"",limit:0},DEFAULT_QUESTIONS:[{id:"1",text:""},{id:"2",text:""},{id:"3",text:""}],DEFAULT_ANSWERS:{1:[{id:"1",questionId:"1",text:"",isCorrect:!0},{id:"2",questionId:"1",text:"",isCorrect:!1}],2:[{id:"1",questionId:"2",text:"",isCorrect:!0},{id:"2",questionId:"2",text:"",isCorrect:!1}],3:[{id:"1",questionId:"3",text:"",isCorrect:!0},{id:"2",questionId:"3",text:"",isCorrect:!1}]}},d=(0,l.yM)(),m=(0,l.yM)(),p=(0,l.yM)(),_=(0,l.yM)(),h=(0,l.yM)(),g=(0,l.yM)(),f=(0,l.yM)(),x=(0,l.MT)(c.DEFAULT_QUIZ).on(d,(e,t)=>({...e,...t})).reset(f),v=(0,l.MT)(c.DEFAULT_QUESTIONS).on(m,(e,t)=>e.map(e=>e.id===t.id?{...e,...t}:e)).on(p,e=>[...e,{id:String(e.length+1),index:e.length,text:""}]).on(_,(e,t)=>{let{startIndex:n,endIndex:i}=t,[r]=e.splice(n,1);return e.splice(i,0,r),e}).reset(f),P=(0,l.MT)(c.DEFAULT_ANSWERS).on(h,(e,t)=>{let{questionId:n,id:i,...r}=t;return{...e,[n]:e[n].map(e=>e.id===i?{...e,...r}:e)}}).on(g,(e,t)=>{let{questionId:n}=t;return{...e,[n]:[...e[n],{id:String(e[n].length),questionId:n,text:"",isCorrect:!1}]}}).reset(f);(0,l.UP)({source:{answers:P,questions:v},clock:p,fn:e=>{let{answers:t,questions:n}=e;return{...t,[n.length]:[{id:"1",questionId:String(n.length),text:"",isCorrect:!0},{id:"2",questionId:String(n.length),text:"",isCorrect:!1}]}},target:P}),(0,l.UP)({source:{answers:P},clock:h,filter:(e,t)=>t.isCorrect,fn:(e,t)=>{let{answers:n}=e,{questionId:i,id:r,isCorrect:o}=t;return{...n,[i]:n[i].map(e=>e.id===r?{...e,isCorrect:o}:{...e,isCorrect:!1})}},target:P});let q=(0,l.GW)(u.eU.createQuiz),y=(0,l.yM)();(0,l.UP)({source:{quiz:x,answers:P,questions:v},clock:y,fn:e=>s(e),target:q});let b=(0,l.GW)(u.eU.updateQuiz),j=(0,l.yM)();(0,l.UP)({source:{quiz:x,answers:P,questions:v},clock:j,fn:e=>s(e),target:b});let z=(0,l.yM)(),D=(0,l.MT)(!1).reset(z);(0,l.UP)({clock:[q.doneData,b.doneData],fn:()=>!0,target:D});let N=(0,l.GW)(u.eU.deleteQuiz),U=(0,i.Bq)(),k=(0,l.GW)(u.eU.getQuiz),C=(0,i.Bq)();(0,l.UP)({clock:C.open,target:f}),(0,l.UP)({clock:k.doneData,fn:e=>{let{quiz:t}=e;return o(t)},target:d}),(0,l.UP)({clock:k.doneData,fn:e=>{let{questions:t}=e;return a(t)},target:v}),(0,l.UP)({clock:k.doneData,fn:e=>{let{answers:t}=e;return t},target:P}),(0,l.UP)({source:{id:U.state},clock:U.open,fn:e=>{let{id:t}=e;return t},target:k});let L=(0,l.GW)(u.eU.getQuizes),T=(0,i.Bq)(),M=(0,l.MT)({}).on(L.doneData,(e,t)=>{let{data:n}=t;return r(n)});(0,l.UP)({clock:T.open,target:L});let E={useQuizes:()=>((0,i.DD)(T),{pool:(0,i.oR)(M),isLoading:(0,i.oR)(L.pending)}),activeModel:{useQuiz:()=>{let e=(0,i.oR)(x),t=(0,i.eY)(d);return{quiz:e,update:t}},useQuestions:()=>({questions:(0,i.oR)(v),update:(0,i.eY)(m),add:(0,i.eY)(p),reorder:(0,i.eY)(_)}),useAnswers:()=>({answers:(0,i.oR)(P),update:(0,i.eY)(h),add:(0,i.eY)(g)}),useCreate:()=>({create:(0,i.eY)(y),isLoading:(0,i.oR)(q.pending),isCreated:(0,i.oR)(D),reset:(0,i.eY)(z)}),useUpdate:()=>({update:(0,i.eY)(j),isLoading:(0,i.oR)(b.pending),isCreated:(0,i.oR)(D),reset:(0,i.eY)(z)}),useGetQuiz:e=>((0,i.DD)(U,e),{isLoading:(0,i.oR)(k.pending)}),useDelete:()=>({deleteQuiz:(0,i.eY)(N)}),useInitQuizCreating:()=>{(0,i.DD)(C)}}}},7211:function(e,t,n){"use strict";n.d(t,{mA:function(){return r},qh:function(){return a},eU:function(){return o}});var i=n(7866);let r={getActiveQuiz:async()=>(0,i.$)({url:"/api",method:"GET"}),getAdminMain:async()=>(0,i.$)({url:"/admin/main/api",method:"GET"}),updateMain:async e=>(0,i.$)({url:"/admin/main/api",method:"PUT",body:e})},o={createQuiz:e=>(0,i.$)({url:"/admin/add/api",method:"POST",body:e}),getQuizes:()=>(0,i.$)({url:"/admin/list/api",method:"GET"}),getQuiz:e=>(0,i.$)({url:"/admin/quiz/".concat(e,"/api"),method:"GET"}),updateQuiz:e=>(0,i.$)({url:"/admin/quiz/".concat(e.quiz.id,"/api"),method:"PUT",body:e}),deleteQuiz:e=>(0,i.$)({url:"/admin/quiz/".concat(e,"/api"),method:"DELETE"})},a={getList:async()=>(0,i.$)({url:"/admin/promo/api",method:"GET"}),createPromo:async e=>(0,i.$)({url:"/admin/promo/api",method:"POST",body:e}),updatePromo:async e=>(0,i.$)({url:"/admin/promo/".concat(e.id,"/api"),method:"PUT",body:e}),deletePromo:async e=>(0,i.$)({url:"/admin/promo/".concat(e,"/api"),method:"DELETE"}),getPromo:async e=>(0,i.$)({url:"/admin/promo/".concat(e,"/api"),method:"GET"})}},7866:function(e,t,n){"use strict";n.d(t,{$:function(){return i}});let i=async e=>{let{url:t,method:n="GET",body:i}=e;return fetch(t,{method:n,headers:{"Content-Type":"application/json"},..."GET"!==n&&{body:JSON.stringify(i)}}).then(e=>e.json())}},4741:function(e,t,n){"use strict";n.d(t,{z:function(){return s}});var i=n(7437),r=n(2265),o=n(9047),a=n.n(o);let s=r.memo(e=>{let{children:t,ariaLabel:n,view:o="primary",isBold:s=!1,isDisabled:u=!1,className:l,onPress:c}=e,d=(0,r.useMemo)(()=>[a().button,a()["button--view-".concat(o)],...s?[a().isBold]:[],...u?[a().isDisabled]:[],l].join(" "),[l,o,s,u]);return(0,i.jsx)("button",{"aria-label":n,className:d,disabled:u,onClick:c,children:t})})},2063:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var i=n(7437),r=n(1396),o=n.n(r),a=n(2265),s=n(9347),u=n.n(s);let l=a.memo(e=>{let{className:t,children:n,href:r}=e;return(0,i.jsx)(o(),{href:r,className:"".concat(t," ").concat(u().root),children:n})})},3321:function(e,t,n){"use strict";n.d(t,{r:function(){return s}});var i=n(7437),r=n(2265),o=n(6833),a=n.n(o);let s=r.memo(e=>{let{className:t,children:n,title:r}=e;return(0,i.jsxs)("div",{className:"".concat(a().root," ").concat(t),children:[(0,i.jsx)("h1",{className:a().title,children:r}),n]})})},8632:function(e,t,n){"use strict";n.d(t,{I:function(){return s}});var i=n(7437),r=n(2265),o=n(4569),a=n.n(o);let s=r.memo(e=>{let{value:t,setValue:n,placeholder:o,error:s,type:u,label:l,className:c}=e,d=(0,r.useMemo)(()=>[a().input,s&&a().error].join(" "),[]);return(0,i.jsxs)("div",{className:c,children:[l&&(0,i.jsx)("label",{className:a().label,children:l}),(0,i.jsx)("input",{className:d,value:t,onChange:e=>{var t;let{nativeEvent:i}=e;n(null===(t=i.target)||void 0===t?void 0:t.value)},placeholder:o,type:u})]})})},9328:function(e,t,n){"use strict";n.d(t,{P:function(){return l}});var i=n(7437),r=n(4741),o=n(2265),a=n(9406),s=n.n(a),u=n(3321);let l=o.memo(e=>{let{className:t,title:n,children:o,onPress:a}=e;return(0,i.jsxs)(u.r,{className:t,title:n,children:[(0,i.jsx)(r.z,{className:s().button,ariaLabel:"Добавть",onPress:a,children:"Добавить"}),o]})})},4470:function(e,t,n){"use strict";n.d(t,{P:function(){return s}});var i=n(7437),r=n(2265),o=n(3981),a=n.n(o);let s=r.memo(e=>{let{value:t,options:n,onChange:r,className:o}=e;return(0,i.jsx)("select",{className:"".concat(a().root," ").concat(o),value:t,onChange:e=>r(e.target.value),children:n.map((e,t)=>{let{id:n,text:r}=e;return(0,i.jsx)("option",{value:n,children:r},t)})})})},8865:function(e,t,n){"use strict";n.r(t),n.d(t,{Header:function(){return c}});var i=n(7437),r=n(1396),o=n.n(r),a=n(2089),s=n.n(a),u=n(4033);let l=e=>e.includes("admin"),c=()=>{let e=(0,u.usePathname)();return(0,i.jsx)("header",{className:s().header,children:(0,i.jsxs)("div",{className:s().container,children:[(0,i.jsxs)("div",{className:s().main,children:[(0,i.jsx)("span",{className:s().logo,children:"LOGO NAME"}),(0,i.jsx)("p",{className:s().description,children:"Краткое описание чем занимаемся"})]}),l(e)?(0,i.jsxs)("div",{className:"".concat(s().menu," ").concat(s()["admin-menu"]),children:[(0,i.jsx)(o(),{className:s().link,href:"/admin/main",children:"Главная"}),(0,i.jsx)(o(),{className:s().link,href:"/admin/list",children:"Квизы"}),(0,i.jsx)(o(),{className:s().link,href:"/admin/promo",children:"Промокоды"})]}):(0,i.jsxs)("div",{className:s().menu,children:[(0,i.jsx)(o(),{className:s().link,href:"/",children:"Правила"}),(0,i.jsx)(o(),{className:s().link,href:"/",children:"Обратная связь"})]})]})})}},781:function(e,t,n){"use strict";n.r(t),n.d(t,{PromoForm:function(){return l}});var i=n(7437),r=n(5031),o=n(9584),a=n(8632),s=n(694),u=n.n(s);let l=()=>{let{promo:e,fillPromo:t}=r.M.activeModel.usePromo();return(0,i.jsxs)("div",{children:[(0,i.jsx)(a.I,{className:u().field,placeholder:"Промокод",label:"Промокод",value:e.name,setValue:e=>t({name:e})}),(0,i.jsx)(a.I,{className:u().field,placeholder:"Лимит использований",label:"Лимит использований",value:String(e.limit),type:"number",setValue:e=>t({limit:Number(e)})}),(0,i.jsx)(o.Q,{className:u().field,value:e.quizId,onChange:e=>t({quizId:e})})]})}},5846:function(e,t,n){"use strict";n.r(t),n.d(t,{PromoList:function(){return u}});var i=n(7437),r=n(5031),o=n(2063),a=n(9328),s=n(4033);let u=()=>{let{push:e}=(0,s.useRouter)(),{list:t,isLoading:n}=r.M.useGetPromoList();return(0,i.jsx)(a.P,{title:"Промо-коды",onPress:()=>e("/admin/promo/add"),children:!n&&(0,i.jsx)(i.Fragment,{children:t.map(e=>{let{id:t,passed:n,limit:r,name:a}=e;return(0,i.jsxs)(o.Z,{href:"/admin/promo/".concat(t),children:[(0,i.jsx)("p",{children:a}),(0,i.jsxs)("p",{children:[n,"/",r]})]},t)})})})}},9047:function(e){e.exports={button:"Button_button__wliYd","button--view-primary":"Button_button--view-primary__cWRgD","button--view-secondary":"Button_button--view-secondary__m_8WR",isBold:"Button_isBold__taXiK",isDisabled:"Button_isDisabled__Li_lC"}},9347:function(e){e.exports={root:"Card_root__5f1F2"}},6833:function(e){e.exports={root:"ContainerLayout_root__zz1Y6",title:"ContainerLayout_title__4hAT8"}},4569:function(e){e.exports={input:"Input_input__dwy5x",label:"Input_label__5xQux","is-error":"Input_is-error___5fOS"}},9406:function(e){e.exports={button:"ListLayout_button__EGCkl"}},3981:function(e){e.exports={root:"Select_root__G23w_"}},2089:function(e){e.exports={header:"Header_header__Dqf0m",container:"Header_container___yW_1",main:"Header_main__t2bl_",logo:"Header_logo__YGu1H",description:"Header_description__qjc_m",menu:"Header_menu__pWdCw",link:"Header_link__XgKme","admin-menu":"Header_admin-menu__UPLc8"}},694:function(e){e.exports={field:"PromoForm_field__5Btxl"}}}]);